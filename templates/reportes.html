{% extends "base.html" %}

{% block title %}Reportes y Analytics - Sistema de Reservas{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1><i class="fas fa-chart-bar me-2"></i>Reportes y Analytics</h1>
            <button class="btn btn-primary" onclick="exportReports()">
                <i class="fas fa-download me-1"></i>Exportar
            </button>
        </div>
    </div>
</div>

<div class="card border-0 shadow-sm">
    <div class="card-body">
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <h4 class="mt-3">Cargando reportes...</h4>
            <p>Preparando dashboard de analytics</p>
        </div>
    </div>
</div>

<!-- Template Data Bridge - Datos del backend para JavaScript -->
<script id="template-data" type="application/json">
{
    "reportsConfig": {
        "autoRefresh": true,
        "refreshInterval": 30000,
        "exportFormats": ["PDF", "Excel", "CSV"]
    },
    "apiEndpoints": {
        "reservationStats": "/api/v1/stats/reservas",
        "usageStats": "/api/v1/stats/uso",
        "exportReports": "/api/v1/reports/export"
    },
    "initialData": {
        "currentUser": "{{ user.nombre if user else 'Invitado' }}",
        "isAdmin": {{ 'true' if user and user.is_admin else 'false' }}
    }
}
</script>
{% endblock %}

{% block scripts %}
<!-- Core utilities -->
<script src="/static/js/core/template-bridge.js?v=1.0"></script>

<!-- Toast notifications -->
<script src="/static/js/toast-notifications.js?v=1.0"></script>

<!-- Module-specific JavaScript -->
<script src="/static/js/modules/reportes.js?v=1.0"></script>
{% endblock %}